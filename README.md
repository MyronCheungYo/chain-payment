chain-payment Demo

åŸºäº Monad çš„é“¾ä¸Šæ‰«ç æ”¯ä»˜ç³»ç»Ÿï¼ˆIntent + ç­¾å + Relay ä»£ä»˜ + X402 æ”¯ä»˜åè®®ï¼‰

æœ¬é¡¹ç›®å®ç°äº†ä¸€ä¸ªå®Œæ•´çš„é“¾ä¸Šæ”¯ä»˜é—­ç¯ï¼Œé€šè¿‡ Intent-Based Interaction æ–¹å¼ï¼Œç”¨æˆ·åªéœ€è¦ç­¾å Intentï¼Œæ— éœ€å‘é€äº¤æ˜“ã€æ— éœ€ gasï¼Œæ”¯ä»˜ç”±åç«¯ Relay å®Œæˆé“¾ä¸Šç»“ç®—ã€‚

é€‚åˆç”¨äºæ”¯ä»˜æ¼”ç¤ºã€Hackathonã€Web3 è½åœ°åœºæ™¯å¼€å‘

ğŸš€ åŠŸèƒ½ç‰¹ç‚¹ï¼ˆäº®ç‚¹ï¼‰
1. Web3 æ”¯ä»˜çš„æ–°èŒƒå¼ï¼šIntent ä»£æ›¿äº¤æ˜“

ç”¨æˆ·æ— éœ€å‘èµ·é“¾ä¸Šäº¤æ˜“ï¼Œåªéœ€ç­¾å Intentï¼ˆç¦»çº¿ç­¾åï¼‰å³å¯å®Œæˆæ”¯ä»˜ï¼Œä½“éªŒä¸æ”¯ä»˜å®/å¾®ä¿¡ç±»ä¼¼ã€‚

2. åç«¯ä»£ä»˜ gasï¼ˆRelayï¼‰

ç”¨æˆ·ä¸ä»˜ gasï¼Œæ‰€æœ‰æ”¯ä»˜äº¤æ˜“ç”±åç«¯ Relay æ¨é€è‡³ Monad é“¾ã€‚

3. å®Œæ•´å¯è¿è¡Œçš„é—­ç¯

åŒ…å«ï¼š

å•†æˆ·ç«¯ï¼šç”Ÿæˆæ”¯ä»˜æ„å›¾ / å±•ç¤ºäºŒç»´ç 

ç”¨æˆ·ç«¯ï¼šæ‰«ç  â†’ é’±åŒ…ç­¾å

åç«¯ï¼šRelay â†’ è°ƒç”¨ X402 â†’ é“¾ä¸Šæ‰£æ¬¾

åˆçº¦ï¼šIntent æ ¡éªŒã€ç­¾åéªŒè¯ã€ä»£æ‰£ Token

äº‹ä»¶å›è°ƒï¼šæ”¯ä»˜æˆåŠŸé€šçŸ¥

4. X402 æœ€å°æ”¯ä»˜åè®®å®ç°

hashIntent()

ECDSA recover éªŒè¯ç­¾å

nonce é˜²é‡æ”¾

deadline é˜²è¿‡æœŸ

transferFrom æ‰£æ¬¾

Paid äº‹ä»¶

5. å®Œå…¨é€‚é… Monadï¼šé«˜ TPS + ä½å»¶è¿Ÿ

æ”¯ä»˜é“¾è·¯ä¸ Monad é«˜æ€§èƒ½é“¾å¤©ç„¶å¥‘åˆã€‚

                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚         ç”¨æˆ·é’±åŒ… (MetaMask)   â”‚
                           â”‚  - ç­¾å Intent (ç¦»çº¿ç­¾å)      â”‚
                           â”‚  - ä¸å‘äº¤æ˜“ / ä¸ä»˜ gas         â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚ ç­¾å(signature)
                                           â”‚ IntentHash
                                           â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚                                         â”‚
                â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
                â”‚   ç”¨æˆ·å‰ç«¯  â”‚                           â”‚ å•†æˆ·å‰ç«¯    â”‚
                â”‚ user-sign   â”‚                           â”‚ merchant   â”‚
                â”‚ - æ˜¾ç¤º Intentâ”‚                           â”‚ - ç”Ÿæˆ Intent   â”‚
                â”‚ - é’±åŒ…ç­¾å  â”‚                           â”‚ - å±•ç¤ºäºŒç»´ç     â”‚
                â”‚             â”‚                           â”‚ - æ”¯ä»˜ç»“æœ      â”‚
                â””â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ Intent JSON                               â”‚ æäº¤ Intent JSON
                      â”‚ signature                                 â”‚ signatureï¼ˆæ¥è‡ªç”¨æˆ·ï¼‰
                      â”‚                                           â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      â”‚ POST /api/pay
                                                      â–¼
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚             åç«¯ Relayerï¼ˆGinï¼‰          â”‚
                                 â”‚  - ç”Ÿæˆ Intent (/api/intent)            â”‚
                                 â”‚  - æ ¡éªŒå‚æ•°                              â”‚
                                 â”‚  - ä»£ä»˜ gas å‘é€äº¤æ˜“                     â”‚
                                 â”‚  - è°ƒç”¨ x402.pay()                       â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚é“¾ä¸Šäº¤æ˜“ï¼ˆrelayï¼‰
                                                   â–¼
                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â”‚               X402 åˆçº¦                   â”‚
                                â”‚  - verify Intent                          â”‚
                                â”‚  - verify signature (ECDSA)               â”‚
                                â”‚  - anti-replay (nonce)                    â”‚
                                â”‚  - deadline æ ¡éªŒ                           â”‚
                                â”‚  - transferFrom(payerâ†’merchant)           â”‚
                                â”‚  - emit Paid(payer, merchant, amount)     â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚ERC20 transfer
                                                   â–¼
                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                             â”‚          ERC20 Token åˆçº¦            â”‚
                             â”‚   - ç”¨æˆ·éœ€é¢„å…ˆ approve X402           â”‚
                             â”‚   - æ‰£æ¬¾ä» payer â†’ merchant           â”‚
                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚          Monad åŒºå—é“¾ï¼ˆEVMï¼‰            â”‚
                              â”‚   - é«˜ TPS                              â”‚
                              â”‚   - å¿«é€Ÿç¡®è®¤                            â”‚
                              â”‚   - ä½å»¶è¿Ÿ                              â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


